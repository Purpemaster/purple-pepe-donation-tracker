<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Purple Pepe Donation Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background: linear-gradient(135deg, #4e54c8, #8f94fb);
            color: white;
            font-family: 'Arial Black', sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            overflow-x: hidden;
        }
        h1 {
            margin-top: 20px;
            font-size: 2.5em;
        }
        .rocket {
            position: absolute;
            width: 100px;
            animation: rocket-fly 6s infinite linear;
        }
        @keyframes rocket-fly {
            0% { left: -120px; top: 60%; }
            100% { left: 110%; top: 10%; }
        }
        .tracker {
            background-color: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
            margin: 40px auto;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
        .progress-bar {
            background: #444;
            border-radius: 25px;
            overflow: hidden;
            margin-top: 15px;
        }
        .progress {
            background: #00ff99;
            height: 30px;
            width: 0%;
            border-radius: 25px;
            transition: width 1s ease-in-out;
        }
        .value {
            font-size: 1.5em;
            margin-top: 10px;
        }
        .prices {
            margin-top: 30px;
            font-size: 1.2em;
        }
        .animated-cash {
            position: absolute;
            width: 40px;
            animation: float 10s infinite ease-in;
        }
        @keyframes float {
            0% { transform: translateY(100vh); }
            100% { transform: translateY(-10vh); }
        }
    </style>
</head>
<body>
    <h1>Purple Pepe Moon Mission</h1>
    <div class="tracker">
        <div class="value">Live Donations: <span id="usd">$0.00</span> / $10,000</div>
        <div class="progress-bar">
            <div class="progress" id="bar"></div>
        </div>
        <div class="prices" id="prices"></div>
    </div>

    <img src="https://i.ibb.co/nnbFj7w/rocket.png" class="rocket" alt="rocket">
    <img src="https://i.ibb.co/fSPSM9G/cash.png" class="animated-cash" style="left:10%"/>
    <img src="https://i.ibb.co/fSPSM9G/cash.png" class="animated-cash" style="left:50%"/>
    <img src="https://i.ibb.co/fSPSM9G/cash.png" class="animated-cash" style="left:80%"/>

    <script>
        async function fetchDonation() {
            try {
                const res = await fetch("https://purple-pepe-donation-tracker.onrender.com/donation");
                const data = await res.json();

                const donation = parseFloat(data.donation_total_usd || 0).toFixed(2);
                const goal = 10000;
                const percent = Math.min((donation / goal) * 100, 100).toFixed(1);

                document.getElementById("usd").textContent = "$" + donation;
                document.getElementById("bar").style.width = percent + "%";

                let pricesHTML = "<h3>Live Prices:</h3>";
                for (const [symbol, price] of Object.entries(data.prices)) {
                    pricesHTML += `<p><strong>${symbol}</strong>: $${parseFloat(price).toFixed(4)}</p>`;
                }
                document.getElementById("prices").innerHTML = pricesHTML;

            } catch (error) {
                console.error("Error fetching donation data:", error);
            }
        }

        fetchDonation();
        setInterval(fetchDonation, 10000); // update every 10 seconds
    </script>
</body>
</html>
